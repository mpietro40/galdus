<html><head><title>Compito di 03dice2013</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css"> @import url(https://themes.googleusercontent.com/fonts/css?kit=10JVD_humAd5zP2yrFqw6vesZW2xOQ-xsNqO47m55DA);</style></head><body style="max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt"><div><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="font-family:&quot;Indie Flower&quot;">Mohamed Hassan &nbsp;3InfoA 02Dice&rdquo;2013</span></p></div><p class="title" style="line-height:1.2;color:#000000;text-align:center;direction:ltr;font-size:21pt;margin:0;font-family:&quot;Trebuchet MS&quot;;padding:0"><a name="h.191evp5d2rvi"></a><span style="font-family:&quot;Indie Flower&quot;">PHP e l&rsquo;interazione con il database:</span></p><p class="title" style="line-height:1.2;color:#000000;text-align:center;direction:ltr;font-size:21pt;margin:0;font-family:&quot;Trebuchet MS&quot;;padding:0"><a name="h.aqnsawkahh4t"></a><span style="font-family:&quot;Indie Flower&quot;">Aprire/Chiudere la connessione al DB </span></p><p style="line-height:1.846153846;height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="font-size:10pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;"></span></p><p class="subtitle" style="padding-left:0;padding-right:0;line-height:1.714285714;padding-top:0pt;color:#666666;text-align:left;direction:ltr;font-size:13pt;font-style:italic;margin:0;font-family:&quot;Trebuchet MS&quot;;padding-bottom:10pt"><a name="h.hmi7djgvvios"></a><span style="font-size:9pt;font-family:&quot;Indie Flower&quot;">Cominciamo dalle cose semplici, ossia connetterci al database senza inviare query, in questo primo post di programmazione vedremo come instaurare la connessione e, successivamente, distruggerla per liberare risorse.</span></p><p style="line-height:1.714285714;height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;background-color:#ffffff;font-family:&quot;Indie Flower&quot;"></span></p><p style="line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">La funzione che consente di creare una connessione &egrave;:</span></p><a href="#" name="86cbc87f8617c065aa1f5ebf881cabcc636510ce"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" style="margin-right:auto;border-collapse:collapse;margin-left:"><tbody><tr><td style="vertical-align:top;width:21.2pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">1</span></p></td><td style="vertical-align:top;width:446.8pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">mysqli_connect([string $host], [string $username], [string $password], [string $dbname])</span></p></td></tr></tbody></table><p style="line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">Essa prende in input l&rsquo;host su cui &egrave; installato MySQL, le credenziali di accesso al DB, il nome di questo (opzionalmente &egrave; possibile specificare la porta &ndash; se diversa da quella standard &ndash; ed il socket) e ritorna una variabile di tipo mysqli che servir&agrave; per l&rsquo;esecuzione delle query.</span></p><p style="line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">Supponendo di volerci connettere al DB dell&rsquo;applicazione GymGym in maniera procedurale il codice da usare &egrave; il seguente:</span></p><a href="#" name="84bfd5b040e54ebd66ccb4f3cd7b64e0ac9eee9c"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" style="margin-right:auto;border-collapse:collapse;margin-left:"><tbody><tr><td style="vertical-align:top;width:21.9pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">1</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">2</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">3</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">4</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">5</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">6</span></p></td><td style="vertical-align:top;width:446.1pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">$dbhostname = &#39;localhost&#39;;</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">$dbusername = &#39;root&#39;;</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">$dbpassword = &#39;&#39;;</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">$dbname = &#39;GymGymDB&#39;;</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">&nbsp;</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">$dbConnection = mysqli_connect($dbhostname, $dbusername, $dbpassword, $dbname);</span></p></td></tr></tbody></table><p style="line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">Ovviamente se i parametri di connessione al vostro database sono diversi dai miei valorizzate le variabili che sono diverse in maniera opportuna. Se qualcosa durante la connessione &egrave; andato storto, mysqli_connect restituisce false e possiamo stampare l&rsquo;errore in questo modo:</span></p><a href="#" name="22d59f1e25e0b0c1db35cd6bdc244960768660ac"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" style="margin-right:auto;border-collapse:collapse;margin-left:"><tbody><tr><td style="vertical-align:top;width:21.9pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">1</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">2</span></p></td><td style="vertical-align:top;width:446.1pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">if(!$dbConnection)</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">&nbsp; &nbsp; die(&#39;Database connection failed: &#39; . mysqli_connect_error());</span></p></td></tr></tbody></table><p style="line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">Bene, abbiamo visto come instaurare una connessione al DB accertandoci che tutto sia andato a buon fine, nei prossimi articoli vedremo come usare la connessione creata per eseguire query; oggi concludiamo con la chiusura della connessione, che rilascia le risorse precedentemente allocate dal sistema. L&rsquo;istruzione che consente di distruggere una connessione &egrave; la seguente:</span></p><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:1.714285714;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#444444;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">PHP</span></p><a href="#" name="111a75671d3485da4350712486baff344cc392c8"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" style="margin-right:auto;border-collapse:collapse;margin-left:"><tbody><tr><td style="vertical-align:top;width:21.9pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;text-align:center;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="color:#757575;font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">1</span></p></td><td style="vertical-align:top;width:446.1pt;border-style:solid;border-color:#000000;border-width:0pt;padding:0pt 5pt 0pt 5pt"><p style="padding-left:0;padding-right:0;padding-top:9pt;line-height:2.0;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding-bottom:9pt"><span style="font-size:12pt;background-color:#ffffff;font-family:&quot;Indie Flower&quot;">mysqli_close(mysqli $connection)</span></p></td></tr></tbody></table><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span style="font-family:&quot;Indie Flower&quot;"></span></p></body></html>